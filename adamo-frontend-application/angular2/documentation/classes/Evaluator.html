<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>angular2-webpack documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">angular2-webpack documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">











<ol class="breadcrumb">
  <li>Classes</li>
  <li>Evaluator</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/ModelerComponent/evaluator/evaluator.component.ts</code>
        </p>





            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#apiService">apiService</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#camundaModdleDescriptor">camundaModdleDescriptor</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#commandQueue">commandQueue</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#containerRef">containerRef</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#extraPaletteEntries">extraPaletteEntries</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#ipimTags">ipimTags</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#lookup">lookup</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#modeler">modeler</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#modelerComponent">modelerComponent</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#propertiesPanelModule">propertiesPanelModule</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#propertiesProviderModule">propertiesProviderModule</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#propsPanelRef">propsPanelRef</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#root">root</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#rootID">rootID</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#rootxml">rootxml</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#variables">variables</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#xmls">xmls</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#zipArray">zipArray</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#addVar">addVar</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#asyncForEach">asyncForEach</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#createNewModeler">createNewModeler</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#createZipDownload">createZipDownload</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#evaluateProcesses">evaluateProcesses</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#executeAsyncEvaluation">executeAsyncEvaluation</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#exportFromModeler">exportFromModeler</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#extractSubmodels">extractSubmodels</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#getAllSubmodels">getAllSubmodels</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#getCombinedTermList">getCombinedTermList</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#getXMLFromDB">getXMLFromDB</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#importFromXML">importFromXML</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, xml: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, apiService: <a href="../injectables/ApiService.html">ApiService</a>, root: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="84" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:84</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>id</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>xml</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>apiService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/ApiService.html" target="_self" >ApiService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>root</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="apiService"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            apiService</b>
                            <a href="#apiService"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../injectables/ApiService.html" target="_self" >ApiService</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="47" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:47</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="camundaModdleDescriptor"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            camundaModdleDescriptor</b>
                            <a href="#camundaModdleDescriptor"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>require(&#x27;camunda-bpmn-moddle/resources/camunda.json&#x27;)</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="46" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:46</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="commandQueue"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            commandQueue</b>
                            <a href="#commandQueue"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Subject&lt;any&gt;</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="45" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:45</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="containerRef"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            containerRef</b>
                            <a href="#containerRef"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>&#x27;#js-canvas&#x27;</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="38" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:38</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="extraPaletteEntries"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            extraPaletteEntries</b>
                            <a href="#extraPaletteEntries"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="44" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:44</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="ipimTags"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            ipimTags</b>
                            <a href="#ipimTags"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>{
    META: &#x27;IPIM_meta_&#x27;,
    VAL: &#x27;IPIM_Val_&#x27;,
    CALC: &#x27;ipim_calc&#x27;,
    SUBPROCESS: &#x27;ipim_subprocess&#x27;
  }</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="58" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:58</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="lookup"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            lookup</b>
                            <a href="#lookup"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>{
    MODELING: &#x27;modeling&#x27;,
    ELEMENTREGISTRY: &#x27;elementRegistry&#x27;,
    SELECTION: &#x27;selection&#x27;,
    VALUES: &#x27;values&#x27;
  }</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="51" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:51</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="modeler"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            modeler</b>
                            <a href="#modeler"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>require(&#x27;bpmn-js/lib/Modeler.js&#x27;)</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="31" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:31</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="modelerComponent"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            modelerComponent</b>
                            <a href="#modelerComponent"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../classes/Model.html" target="_self" >ModelerComponent</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="37" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:37</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="propertiesPanelModule"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            propertiesPanelModule</b>
                            <a href="#propertiesPanelModule"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>require(&#x27;bpmn-js-properties-panel&#x27;)</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="41" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:41</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="propertiesProviderModule"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            propertiesProviderModule</b>
                            <a href="#propertiesProviderModule"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>require(&#x27;bpmn-js-properties-panel/lib/provider/camunda&#x27;)</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="42" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:42</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="propsPanelRef"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            propsPanelRef</b>
                            <a href="#propsPanelRef"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>&#x27;#js-properties-panel&#x27;</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="39" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:39</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="root"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            root</b>
                            <a href="#root"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="48" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:48</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="rootID"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            rootID</b>
                            <a href="#rootID"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="33" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:33</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="rootxml"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            rootxml</b>
                            <a href="#rootxml"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="32" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:32</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="variables"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            variables</b>
                            <a href="#variables"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../classes/Variable.html" target="_self" >Variable[]</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>[]</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="35" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:35</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="xmls"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            xmls</b>
                            <a href="#xmls"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>ModelElement[]</code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>[]</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="34" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:34</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="zipArray"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            zipArray</b>
                            <a href="#zipArray"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>ModelElement[]</code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>[]</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="49" class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:49</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addVar"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            addVar
                        </b>
                        <a href="#addVar"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addVar(name: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, value: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, meta: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="257"
                            class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:257</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>name</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>value</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>meta</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="asyncForEach"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                            asyncForEach
                        </b>
                        <a href="#asyncForEach"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>asyncForEach(array: any[], callback: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="128"
                            class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:128</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>array</td>
                                    <td>
                                            <code>any[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>callback</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createNewModeler"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            createNewModeler
                        </b>
                        <a href="#createNewModeler"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createNewModeler()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="66"
                            class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:66</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createZipDownload"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            createZipDownload
                        </b>
                        <a href="#createZipDownload"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createZipDownload()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="110"
                            class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:110</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="evaluateProcesses"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            evaluateProcesses
                        </b>
                        <a href="#evaluateProcesses"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>evaluateProcesses(variables: <a href="../classes/Variable.html">Variable[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="267"
                            class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:267</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>variables</td>
                                    <td>
                                                <code><a href="../classes/Variable.html" target="_self" >Variable[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/variables.html#is" target="_self" >Promise&lt;void&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="executeAsyncEvaluation"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            executeAsyncEvaluation
                        </b>
                        <a href="#executeAsyncEvaluation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>executeAsyncEvaluation(xml: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="102"
                            class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:102</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>xml</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="exportFromModeler"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            exportFromModeler
                        </b>
                        <a href="#exportFromModeler"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>exportFromModeler()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="171"
                            class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:171</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/variables.html#is" target="_self" >Promise&lt;string&gt;</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="extractSubmodels"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            extractSubmodels
                        </b>
                        <a href="#extractSubmodels"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>extractSubmodels(xml: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="180"
                            class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:180</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>xml</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/variables.html#is" target="_self" >Promise&lt;string[]&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAllSubmodels"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            getAllSubmodels
                        </b>
                        <a href="#getAllSubmodels"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAllSubmodels(xml: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="135"
                            class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:135</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>xml</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCombinedTermList"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            getCombinedTermList
                        </b>
                        <a href="#getCombinedTermList"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getCombinedTermList(xmlList: ModelElement[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="213"
                            class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:213</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>xmlList</td>
                                    <td>
                                            <code>ModelElement[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/variables.html#is" target="_self" >Promise&lt;void&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getXMLFromDB"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            getXMLFromDB
                        </b>
                        <a href="#getXMLFromDB"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getXMLFromDB(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="157"
                            class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:157</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/variables.html#is" target="_self" >Promise&lt;ModelElement&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="importFromXML"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            importFromXML
                        </b>
                        <a href="#importFromXML"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>importFromXML(xml: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="162"
                            class="link-to-prism">src/app/ModelerComponent/evaluator/evaluator.component.ts:162</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>xml</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/variables.html#is" target="_self" >Promise&lt;void&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>





    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {Component, OnInit, ViewChild, AfterViewInit, Input, Output, EventEmitter} from &#x27;@angular/core&#x27;;

import {PaletteProvider} from &#x27;../palette/palette&#x27;;
import {CustomPropertiesProvider} from &#x27;../properties/props-provider&#x27;;
import {Http} from &#x27;@angular/http&#x27;;

import {Observable, Subject} from &#x27;rxjs&#x27;;
import {ModelerComponent} from &#x27;../../ModelerComponent/modeler.component&#x27;;

import {ApiService} from &#x27;../../services/api.service&#x27;;

import * as JSZip from &#x27;jszip&#x27;;
import * as FileSaver from &#x27;file-saver&#x27;;
import { resolve } from &#x27;q&#x27;;
import { Variable } from &#x27;../modals/variable&#x27;;
import { ModelElement} from &#x27;./modelElement&#x27;;
import { Model } from &#x27;../../models/model&#x27;;
import { SnackBarService } from &#x27;../../services/snackbar.service&#x27;;

const customPaletteModule &#x3D; {
  paletteProvider: [&#x27;type&#x27;, PaletteProvider]
};

const customPropertiesProviderModule &#x3D; {
  __init__: [&#x27;propertiesProvider&#x27;],
  propertiesProvider: [&#x27;type&#x27;, CustomPropertiesProvider]
};

export class Evaluator {
  private modeler: any &#x3D; require(&#x27;bpmn-js/lib/Modeler.js&#x27;);
  private rootxml : string;
  private rootID : string;
  private xmls : ModelElement[] &#x3D; [];
  private variables: Variable[] &#x3D; [];

  private modelerComponent : ModelerComponent;
  private containerRef: string &#x3D; &#x27;#js-canvas&#x27;;
  private propsPanelRef: string &#x3D; &#x27;#js-properties-panel&#x27;;

  private propertiesPanelModule: any &#x3D; require(&#x27;bpmn-js-properties-panel&#x27;);
  private propertiesProviderModule: any &#x3D; require(&#x27;bpmn-js-properties-panel/lib/provider/camunda&#x27;);

  private extraPaletteEntries: any;
  private commandQueue: Subject&lt;any&gt;;
  private camundaModdleDescriptor: any &#x3D; require(&#x27;camunda-bpmn-moddle/resources/camunda.json&#x27;);
  private apiService: ApiService;
  private root: any;
  private zipArray: ModelElement[] &#x3D; [];

  private lookup: any &#x3D; {
    MODELING: &#x27;modeling&#x27;,
    ELEMENTREGISTRY: &#x27;elementRegistry&#x27;,
    SELECTION: &#x27;selection&#x27;,
    VALUES: &#x27;values&#x27;
  };

  private ipimTags: any &#x3D; {
    META: &#x27;IPIM_meta_&#x27;,
    VAL: &#x27;IPIM_Val_&#x27;,
    CALC: &#x27;ipim_calc&#x27;,
    SUBPROCESS: &#x27;ipim_subprocess&#x27;
  };

  //Creates a new hidden modeler for the evaluation process!
  private createNewModeler() {
    this.modeler &#x3D; new this.modeler({
      container: &#x27;#evaluatorCanvas&#x27;,  //place the modeler in a special predefined hidden div in html
      propertiesPanel: {
        parent: this.propsPanelRef
      },
      additionalModules: [
        {extraPaletteEntries: [&#x27;type&#x27;, () &#x3D;&gt; this.extraPaletteEntries]},
        {commandQueue: [&#x27;type&#x27;, () &#x3D;&gt; this.commandQueue]},
        //this.propertiesPanelModule,
        this.propertiesProviderModule,
        // customPropertiesProviderModule,
        customPaletteModule
      ],
      moddleExtensions: {
        camunda: this.camundaModdleDescriptor
      }
    });
  }

  constructor(id: string, xml: string, apiService : ApiService, root: any) {
    this.apiService &#x3D; apiService;
    this.rootxml &#x3D; xml;
    this.rootID &#x3D; id;
    this.root &#x3D; root;
    this.zipArray &#x3D; [];
    this.xmls &#x3D; [];
    this.xmls.push(new ModelElement(root.model.name, id, xml));
    //Show Overlay to signal the user that the process is running
    this.root.showOverlay();
    //create a new Modeler for evaluation
    this.createNewModeler();
    //special function call to manage the async process
    this.executeAsyncEvaluation(xml);
  }

  public async executeAsyncEvaluation(xml: string) {
    //first get all submodels used by the process or any subprocess and wait until the last request is finished
    await this.getAllSubmodels(xml);
    //after all models are received, extract all terms from it
    await this.getCombinedTermList(this.xmls);
  }

  //Takes all files evaluated and prepares them for a zip download
  public createZipDownload() {
    const zip &#x3D; new JSZip();

    this.zipArray.forEach((element: ModelElement) &#x3D;&gt; {

    zip.file(element.name + &#x27;.bpmn&#x27;, element.xml);

    });

    zip.generateAsync({type: &#x27;blob&#x27;}).then( (blob: Blob) &#x3D;&gt; { // 1) generate the zip file
      FileSaver.saveAs(blob, this.root.model.name + &#x27;.zip&#x27;);  // 2) trigger the download
    }, (err) &#x3D;&gt; {
     this.root.snackbarService.error(err);
    });

  }

  //Central function for evluation ... works through an array but waits for the prior element to finish its callback!
  private async asyncForEach(array: any[], callback: any) {
    for (let index &#x3D; 0; index &lt; array.length; index++) {
      await callback(array[index], index, array);
    }
  }

  //recursive function that retrievs all subprocesses in a diagram and calls itself again for all new diagramms
  public async getAllSubmodels(xml : string) {
    //Create Array for Subprocesses of current XML
    const currentSubprocesses: string[] &#x3D; await this.extractSubmodels(xml);
    //Iterate over all Subprocess and see if they were already retrieved from DB
    await this.asyncForEach(currentSubprocesses, async (element: string) &#x3D;&gt; {
        //If the Subprocess has no Key, get XML from DB and add it
        if (this.xmls.some(e &#x3D;&gt; e.id &#x3D;&#x3D;&#x3D; element)) {
          //We already have it so do nothing!
        } else {
          const tempModelElement &#x3D; await this.getXMLFromDB(element);
          if (tempModelElement.id !&#x3D;&#x3D; &#x27;&#x27;) {
            this.xmls.push(tempModelElement);
            //As we just added the XML, we recursively call the function to get all of its Subprocesses
            await this.getAllSubmodels(tempModelElement.xml);
          } else {
            this.root.snackbarService.newSnackBarMessage(&#x27;Error: Some Subprocesses returned permission denied &#x27;, &#x27;red&#x27;);
          }
        }
    });
  }

  //get the model form the database but wait for it to finish
  public async getXMLFromDB(id : string): Promise&lt;ModelElement&gt; {
     return await this.apiService.getModelAsync(id).then( (value : ModelElement) &#x3D;&gt; {return value; });
  }

  //import a file form the modeler but wait for the function to finish
  public async importFromXML(xml: string): Promise&lt;void&gt; {
    return new Promise&lt;void&gt;( resolve &#x3D;&gt; {
      this.modeler.importXML(xml, (err: any) &#x3D;&gt; {
        resolve();
      });
    });
  }

  //export the xml string form the modeler but wait for it to finish!
  public async exportFromModeler(): Promise&lt;string&gt; {
    return new Promise&lt;string&gt;( resolve &#x3D;&gt; {
      this.modeler.saveXML({format: true}, (err: any, xml: any) &#x3D;&gt; {
        resolve(xml);
      });
    });
  }

  //takes an xml string and tries to find any referenced subprocesses, return them as string array with respective ids
  public async extractSubmodels(xml : string): Promise&lt;string[]&gt; {

    await this.importFromXML(xml);

    const elementRegistry &#x3D; this.modeler.get(this.lookup.ELEMENTREGISTRY);
    const modeling &#x3D; this.modeler.get(this.lookup.MODELING);
    //Alle Elemente der ElementRegistry holen
    const elements &#x3D; elementRegistry.getAll();
    //Objekte vom this.modeler holen um nicht immer so viel tippen zu müssen.
    const subprocesses: string[] &#x3D; new Array();
    //Alle Elemente durchlaufen um Variablen zu finden
    for (const element of elements) {
      if (element.type &#x3D;&#x3D;&#x3D; &#x27;bpmn:SubProcess&#x27;) {
        //Prüfen ob erweiterte Eigenschaften für das Objekt existieren
        if (element.businessObject.extensionElements) {
          //Wenn vorhandne die Elemente auslesen
          const extras &#x3D; element.businessObject.extensionElements.get(&#x27;values&#x27;); // this.lookup.values
          //Schleife über alle Elemente
          for (let i &#x3D; 0; i &lt; extras[0].values.length; i++) {
            //Prüfen ob der Name des Elementes IPIM_Val entspricht
            if (extras[0].values[i].name.toLowerCase().startsWith(this.ipimTags.SUBPROCESS)) {
              if (subprocesses.indexOf(extras[0].values[i].value) &#x3D;&#x3D;&#x3D; -1) {
                subprocesses.push(extras[0].values[i].value);
              }
            }
          }
        }
      }
    }
    return subprocesses;
  }

  //walks through an array of xml documents and extracts any variable that is unique, returns them as an array of ModelElement
  public async getCombinedTermList(xmlList: ModelElement[]): Promise&lt;void&gt; {

    this.variables &#x3D; [];

    await this.asyncForEach(xmlList, async (element: ModelElement) &#x3D;&gt; {

      await this.importFromXML(element.xml);
      const elementRegistry &#x3D; this.modeler.get(this.lookup.ELEMENTREGISTRY);
      const modeling &#x3D; this.modeler.get(this.lookup.MODELING);
      //Alle Elemente der ElementRegistry holen
      const elements &#x3D; elementRegistry.getAll();

      //Alle Elemente durchlaufen um Variablen zu finden
      // elements.forEach((element: any) &#x3D;&gt; {
      for (const element of elements) {
        //Prüfen ob erweiterte Eigenschaften für das Objekt existieren
        if (element.businessObject.extensionElements) {
          //Wenn vorhandne die Elemente auslesen
          const extras &#x3D; element.businessObject.extensionElements.get(&#x27;values&#x27;);
          //Schleife über alle Elemente
          for (let i &#x3D; 0; i &lt; extras[0].values.length; i++) {
            const valueName &#x3D; extras[0].values[i].name.toLowerCase();
            //Prüfen ob der Name des Elementes IPIM_Val entspricht
            if (valueName.startsWith(&#x27;IPIM_Val_&#x27;.toLowerCase())) {
              //Variablen als Key mit Wert in Map übernehmen
              this.addVar(valueName.replace(&#x27;IPIM_Val_&#x27;.toLowerCase(), &#x27;&#x27;), extras[0].values[i].value.toLowerCase(), false);
            }
            //Prüfen ob der Name des Elementes IPIM_Val entspricht
            if (valueName.startsWith(&#x27;IPIM_META_&#x27;.toLowerCase())) {
              //Variablen als Key mit Wert in Map übernehmen
              this.addVar(valueName.replace(&#x27;IPIM_META_&#x27;.toLowerCase(), &#x27;&#x27;), extras[0].values[i].value.toLowerCase(), true);
            }
          }
        }
      }
    });
    //remove Overlay we are ready
    this.root.hideOverlay();
    //prepare modal to edit variables and show it
    this.root.evaluatorModal.setProps(this.modeler, this.root, this.variables);
    this.root.evaluatorModal.modal.open();
  }

  //adds a Variable to the array ... but only if it is unique
  public addVar(name: string, value: string, meta: boolean): void {
    if (this.variables.some(e &#x3D;&gt; e.name &#x3D;&#x3D;&#x3D; name)) {
      //We already have it so do nothing!
    } else {
      //We do not have it so push it!
    this.variables.push(new Variable(name, value, meta));
    }
  }

  //starts after user finishes variable input, evaluates all models
  public async evaluateProcesses(variables: Variable[]): Promise&lt;void&gt; {

    const varValMap &#x3D; {};

    variables.forEach(element &#x3D;&gt; {
      varValMap[element.name.toLowerCase()] &#x3D; element.value.toLowerCase();
    });

    await this.asyncForEach(this.xmls, async (element: ModelElement) &#x3D;&gt; {

      await this.importFromXML(element.xml);
      const elementRegistry &#x3D; this.modeler.get(this.lookup.ELEMENTREGISTRY);
      const modeling &#x3D; this.modeler.get(this.lookup.MODELING);
      //Alle Elemente der ElementRegistry holen
      const elements &#x3D; elementRegistry.getAll();

      //Alle Elemente durchlaufen um Evaluationsterme auszuwerten
      for (const element of elements) {
        //Prüfen ob erweiterte Eigenschaften für das Objekt existieren
        if (typeof element.businessObject.extensionElements !&#x3D;&#x3D; &#x27;undefined&#x27;) {
          //Wenn vorhandne die Elemente auslesen
          const extras &#x3D; element.businessObject.extensionElements.get(&#x27;values&#x27;);
          //Schleife über alle Elemente
          for (let i &#x3D; 0; i &lt; extras[0].values.length; i++) {
            //Prüfen ob der Name des Elementes IPIM entspricht
            if (extras[0].values[i].name.toLowerCase() &#x3D;&#x3D;&#x3D; this.ipimTags.CALC) {
              //Stringoperationen um den Wert anzupassen.
              let evalterm &#x3D; extras[0].values[i].value.toLowerCase();
              //Solange ein [ Zeichen vorkommt, String nach Variablen durchszuchen und ersetzen mit VarValMap einträgen
              while (evalterm.includes(&#x27;[&#x27;)) {
                // [ ist vorhanden, daher String nach Substrings durchsuchen
                const substr &#x3D; evalterm.substring(evalterm.indexOf(&#x27;[&#x27;) + &#x27;[&#x27;.length, evalterm.indexOf(&#x27;]&#x27;));
                //evalterm mit String.replace veränderun und variablenwert einsetzen.
                evalterm &#x3D; evalterm.replace(&#x27;[&#x27; + substr + &#x27;]&#x27;, varValMap[substr]);
              }
              //Sichere Eval Sandbox schaffen
              // const safeEval &#x3D; require(&#x27;safe-eval&#x27;);
              // import Interpreter from &#x27;js-interpreter&#x27;;
              const jSInterpreter &#x3D; require(&#x27;js-interpreter&#x27;);
              const interpreter &#x3D; new jSInterpreter(evalterm);

              interpreter.run();
              // Mittels Teufelsmagie(eval) prüfen ob der zugehörige Wert TRUE ist
              const evalResult : boolean &#x3D; interpreter.value.data;
              console.log(&#x27;using js-interpreter for: &#x27;, evalterm, &#x27;Result: &#x27;, evalResult);
              if (!evalResult) {
              // Mittels Teufelsmagie(eval) prüfen ob der zugehörige Wert TRUE ist
                //Element über modeling Objekt löschen
                modeling.removeElements([element]);
              }
            }
          }
        }
      }
      //model is evaluated, push it zip file
      this.zipArray.push(new ModelElement(element.name, element.id, await this.exportFromModeler() ));
    });
    //all models finished, create zip and remove overlay
    this.createZipDownload();
    this.root.hideOverlay();
  }

}</code></pre>
    </div>
</div>



                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'Evaluator.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
